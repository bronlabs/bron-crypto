package hashcomm

import (
	"golang.org/x/crypto/sha3"
)

// Define the types for Message and Commitment
type Message []byte
type Commitment []byte

var (
	// CommitmentHashFunction is used in the `commitments` package for a UC-secure commitment scheme which chains HMACs and enforces presence of a session-id. Size must be CollisionResistanceBytes.
	CommitmentHashFunction = sha3.New256
)

type Committer struct {
	sessionId []byte
}

type Verifier struct {
	sessionId []byte
}

// HashCommitment is a basic commitment scheme using a hash function.
type HashCommitment struct {
	commitment []byte
	randomness []byte
	sessionId  []byte
}

// HashOpening is the opening for the HashCommitment.
type HashOpening struct {
	message []byte
}

// func NewHashCommitment(sessionId []byte) *HashCommitment {
// 	return &HashCommitment{nil, nil, sessionId}
// }

// Implementing Committer interface
func (c *Committer) Commit(message Message) (Commitment, Opening, error) {
	return HashCommitment{[]byte("dummy_commitment"), []byte("dummy_randomness"), c.sessionId}, HashCommitment{message}, nil
}

// Implementing Verifier interface
func (v *Verifier) Verify(commitment Commitment, opening Opening) error {
	return nil
}

// // Implementing HomomorphicCommitmentScheme interface
// func (h HomomorphicCommitmentScheme) CombineCommitments(x Commitment, ys ...Commitment) (Commitment, error) {
// 	// Since hash-based commitments don't support homomorphic operations,
// 	// we'll return an error indicating that this operation is not supported.
// 	return nil, errors.New("hash-based commitments do not support homomorphic operations")
// }

// func (h HomomorphicCommitmentScheme) ScaleCommitment(x Commitment, n *saferith.Nat) (Commitment, error) {
// 	// Similarly, we'll return an error for unsupported operations.
// 	return nil, errors.New("hash-based commitments do not support homomorphic operations")
// }

// func (h HomomorphicCommitmentScheme) CombineOpenings(x Opening, ys ...Opening) (Opening, error) {
// 	// We'll return an error for unsupported operations.
// 	return nil, errors.New("hash-based commitments do not support homomorphic operations")
// }

// func (h HomomorphicCommitmentScheme) ScaleOpening(x Opening, n *saferith.Nat) (Opening, error) {
// 	// We'll return an error for unsupported operations.
// 	return nil, errors.New("hash-based commitments do not support homomorphic operations")
// }
