info:
  name: krypton-primitives
  version: "0.1"

include:
  - file: /etc/serve/include.d/library.yml

conf:
  test-suite ? {{ vars.test-suite }}-{{ info.feature }}:
    "-": "test-master"
    "^-.+": "test-feature-branch"
    "*": "test-{{ vars.test-suite }}"

build:
  - docker-image: { no-push: true }
  - sh: docker run --rm {{ conf.docker.image }} make {{ conf.test-suite }}